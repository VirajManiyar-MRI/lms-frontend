<div class="dashboard-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">LMS</div>
    <nav>
      <ul>
        <li routerLink="/dashboard">Dashboard</li>
        <li routerLink="/lead-status">Lead Status</li>
        <li routerLink="/lead-management">Lead Management</li>
        <li class="active">User Management</li>
        <li routerLink="/signout">Sign Out</li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Navbar -->
    <header class="navbar">
      <input type="text"
             placeholder="Search..."
             class="search-bar"
             (input)="onSearch($event)"
             aria-label="Search users" />
      <div class="icons">
        <span class="notification-icon" title="Notifications">🔔</span>
        <span class="profile-icon" title="Profile">👤 Viraj (Admin)</span>
      </div>
    </header>

    <!-- User Management Section -->
    <div class="user-management">
      <header class="user-header">
        <input type="text"
               placeholder="Search..."
               class="search-bar"
               (input)="onSearch($event)"
               aria-label="Search users" />
        <select (change)="onFilterChange($event)" aria-label="Filter users by role">
          <option value="">All Roles</option>
          <option value="Admin">Admin</option>
          <option value="Manager">Manager</option>
          <option value="Sales">Sales</option>
        </select>
        <button (click)="openAddUserModal()" title="Add New User">➕ Add User</button>
      </header>

      <!-- User Table -->
      <div class="user-table">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Email</th>
              <th>Role</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsers">
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.role }}</td>
              <td>
                <button (click)="openEditUserModal(user)" title="Edit User">✏️ Edit</button>
                <button (click)="deleteUser(user.id)" title="Delete User">🗑 Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- User Modal -->
    <div *ngIf="showUserModal" class="modal">
      <div class="modal-content">
        <h2>{{ isEditMode ? 'Edit User' : 'Add User' }}</h2>
        <label for="userName">Name:</label>
        <input id="userName" [(ngModel)]="userForm.name" type="text" required />

        <label for="userEmail">Email:</label>
        <input id="userEmail" [(ngModel)]="userForm.email" type="email" required />

        <label for="userRole">Role:</label>
        <select id="userRole" [(ngModel)]="userForm.role">
          <option value="Admin">Admin</option>
          <option value="Manager">Manager</option>
          <option value="Sales">Sales</option>
        </select>

        <label *ngIf="!isEditMode" for="userPassword">Password:</label>
        <input *ngIf="!isEditMode" id="userPassword" [(ngModel)]="userForm.password" type="password" required />

        <div class="modal-actions">
          <button (click)="saveUser()">{{ isEditMode ? 'Update' : 'Create' }}</button>
          <button (click)="closeUserModal()">Cancel</button>
        </div>
      </div>
    </div>
  </main>
</div>
